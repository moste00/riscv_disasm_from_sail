on: 
    - push 

jobs:
    smoke-test:
        runs-on: ubuntu-latest
        steps:
            - name: set up the Ocaml toolchain
              run: |
                sudo apt-get install bubblewrap
                echo "" | bash -c "sh <(curl -fsSL https://raw.githubusercontent.com/ocaml/opam/master/shell/install.sh)"
                echo "1" | opam init
                opam install dune
            
            - name: hello ocaml
              run: |
                source ~/.bash_profile
                dune init proj hello
                cd hello
                dune build
                dune exec hello